<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>src/components/DisasterSearch.vue - Documentation</title>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <span class="navicon"></span>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-build_dev-server.html">build/dev-server</a></li><li><a href="module-bus.html">bus</a></li><li><a href="module-components_App.html">components/App</a></li><li><a href="module-components_Disaster.html">components/Disaster</a></li><li><a href="module-components_DisasterSearch.html">components/DisasterSearch</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-components_DisasterSearch.html#~update">update</a></li></ul></li><li><a href="module-components_Header.html">components/Header</a></li><li><a href="module-components_Icon.html">components/Icon</a></li><li><a href="module-components_Message.html">components/Message</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-components_Message.html#~displayMessage">displayMessage</a></li></ul></li><li><a href="module-components_Report.html">components/Report</a></li><li><a href="module-components_SavedExtracts.html">components/SavedExtracts</a></li><li><a href="module-components_Sprites.html">components/Sprites</a></li><li><a href="module-lib_controllers_api.html">lib/controllers/api</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-lib_controllers_api.html#~/applicants/:queryType">/applicants/:queryType</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~/disasternumber/:qry">/disasternumber/:qry</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~/disasterquery/:qry">/disasterquery/:qry</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~/export/:fileNamePart">/export/:fileNamePart</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~/states/:state/disasters">/states/:state/disasters</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~/states/:stateId/:localeType">/states/:stateId/:localeType</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~/version">/version</a></li></ul></li><li><a href="module-reportStore.html">reportStore</a><ul class='members'><li class='list-title'>Members</li><li data-type='member'><a href="module-reportStore.html#.actions">actions</a></li></ul><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-reportStore.html#~updateReportDisasterList">updateReportDisasterList</a></li></ul></li><li><a href="module-router.html">router</a><ul class='members'><li class='list-title'>Members</li><li data-type='member'><a href="module-router.html#.beforeRouteEnter">beforeRouteEnter</a></li></ul></li><li><a href="module-searchStore.html">searchStore</a><ul class='members'><li class='list-title'>Members</li><li data-type='member'><a href="module-searchStore.html#.actions">actions</a></li></ul><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-searchStore.html#~clearCurrentExtract">clearCurrentExtract</a></li><li data-type='method'><a href="module-searchStore.html#~clearSearch">clearSearch</a></li><li data-type='method'><a href="module-searchStore.html#~deleteExtract">deleteExtract</a></li><li data-type='method'><a href="module-searchStore.html#~loadExtract">loadExtract</a></li><li data-type='method'><a href="module-searchStore.html#~resetStatus">resetStatus</a></li><li data-type='method'><a href="module-searchStore.html#~saveExtract">saveExtract</a></li><li data-type='method'><a href="module-searchStore.html#~setSearchLoading">setSearchLoading</a></li><li data-type='method'><a href="module-searchStore.html#~setStatus">setStatus</a></li><li data-type='method'><a href="module-searchStore.html#~toggleCurrentExtract">toggleCurrentExtract</a></li><li data-type='method'><a href="module-searchStore.html#~updateDisasterList">updateDisasterList</a></li></ul></li><li><a href="module-store.html">store</a></li><li><a href="module-tour.html">tour</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-tour.html#~clearTabIndex">clearTabIndex</a></li><li data-type='method'><a href="module-tour.html#~removeObserver">removeObserver</a></li><li data-type='method'><a href="module-tour.html#~restoreTabIndex">restoreTabIndex</a></li></ul></li><li><a href="module-vueMixins.html">vueMixins</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-vueMixins.html#~iconName">iconName</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#update">update</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">src/components/DisasterSearch.vue</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template lang="pug">
  .wrapper.container-fluid
    .row
      .col-xs-12.col-md-6.search-container(:class="hasItems?'with-extracts':''")
        #opaque-bg.row
          h2 Disaster Search
          .col.DisasterSearch
            #search
              .offset-bg
                .search-wrapper.input-group(aria-live="assertive")
                  label.sr-only(for='search-text' id='search-text-label') search FEMA disasters
                  input#search-text.DisasterSearch__input(
                    type='text'
                    ref='searchText'
                    placeholder='Search by disaster number, type, or state'
                    autocomplete='off'
                    v-model='query'
                    @keydown.esc='reset'
                    @keydown.enter='update')
                  icon(v-if="loading", classes='fa-spin' name='fa-spinner')
                  template(v-else)
                    button#clear-text(@click='reset' v-if='isDirty' title='Clear search text')
                      icon(classes='clear-text' name='fa-times')
                  span.input-group-btn
                    button#search-btn.usa-button.btn.btn-default(type="button" @click="update" title="Search disasters magnifying glass icon")
                      icon(name='fa-search')
                .message-wrapper
                  message(:status="status" :locationOfMessage="'app-message'")
                .disaster-list(v-show='hasItems')
                  ul.disaster-search-recs
                    li(v-for='(item, $item) in items')
                      disaster(:prefix="'search'" :item='item')
      .col-xs-12.col-md-6.no-padding.saved-extracts
        savedextracts(ref='extracts')
&lt;/template>

&lt;script>
import disaster from './Disaster'
import message from './Message'
import savedextracts from './SavedExtracts'
import magic from '@/bus'

/**
* Component responsible for enabling a user to search for and select disasters to be included in a data export.
* @module components/DisasterSearch
*/
export default {
  name: 'disaster-search',
  components: {disaster, savedextracts, message},
  mounted () {
    magic.$on('clearQuery', () => {
      if (this.$refs.searchText.value === '') this.query = ''
    })
  },
  data () {
    return {
      query: ''
    }
  },
  computed: {
    items () {
      return this.$store.getters.currentSearchResult
    },
    hasItems () {
      return this.items &amp;&amp; this.items.length > 0
    },
    isEmpty () {
      return !this.query
    },
    isDirty () {
      return !!this.query
    },
    status () {
      return this.$store.getters.status
    },
    loading () {
      return this.$store.getters.searchLoading
    }
  },
  methods: {
    /**
    * Will submit query to load disasters if it is a number with a length >= 4 or >= 2 alpha characters
    * @function update
    */
    update () {
      if (!this.query) return this.reset()
      if (/^\d+$/.test(this.query) &amp;&amp; this.query.length &lt; 4) return
      if (this.query.length &lt; 2) return
      this.$store.dispatch('loadDisasterList', this.query)
    },
    reset () {
      this.query = ''
      this.$store.commit({type: 'clearSearch'})
    }
  }
}
&lt;/script>
&lt;style src="../../public/assets/_scss/app.scss" lang="scss">
&lt;/style>
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc" target="_blank">JSDoc 3.5.3</a> on 7/23/2017 using the <a href="https://github.com/Grafluxe/boxy-jsdoc-template" target="_blank">boxy-jsdoc-template</a> theme.
</footer>

<script src="scripts/prettify/prettify.js"></script>
<script src="scripts/prettify/lang-css.js"></script>
<script src="scripts/script.js"></script>

</body>
</html>
