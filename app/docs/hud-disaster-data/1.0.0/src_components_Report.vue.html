<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>src/components/Report.vue - Documentation</title>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <span class="navicon"></span>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-build_dev-server.html">build/dev-server</a></li><li><a href="module-bus.html">bus</a></li><li><a href="module-components_App.html">components/App</a></li><li><a href="module-components_Disaster.html">components/Disaster</a></li><li><a href="module-components_DisasterSearch.html">components/DisasterSearch</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-components_DisasterSearch.html#~update">update</a></li></ul></li><li><a href="module-components_Header.html">components/Header</a></li><li><a href="module-components_Icon.html">components/Icon</a></li><li><a href="module-components_Map.html">components/Map</a></li><li><a href="module-components_Message.html">components/Message</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-components_Message.html#~displayMessage">displayMessage</a></li></ul></li><li><a href="module-components_Report.html">components/Report</a></li><li><a href="module-components_SavedExtracts.html">components/SavedExtracts</a></li><li><a href="module-components_Sprites.html">components/Sprites</a></li><li><a href="module-lib_controllers_api.html">lib/controllers/api</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-lib_controllers_api.html#~get">get</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~get">get</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~get">get</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~get">get</a></li><li data-type='method'><a href="module-lib_controllers_api.html#~get">get</a></li></ul></li><li><a href="module-reportStore.html">reportStore</a><ul class='members'><li class='list-title'>Members</li><li data-type='member'><a href="module-reportStore.html#.actions">actions</a></li></ul><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-reportStore.html#~updateReportDisasterList">updateReportDisasterList</a></li></ul></li><li><a href="module-router.html">router</a><ul class='members'><li class='list-title'>Members</li><li data-type='member'><a href="module-router.html#.beforeRouteEnter">beforeRouteEnter</a></li></ul></li><li><a href="module-searchStore.html">searchStore</a><ul class='members'><li class='list-title'>Members</li><li data-type='member'><a href="module-searchStore.html#.actions">actions</a></li></ul><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-searchStore.html#~clearCurrentExtract">clearCurrentExtract</a></li><li data-type='method'><a href="module-searchStore.html#~clearSearch">clearSearch</a></li><li data-type='method'><a href="module-searchStore.html#~deleteExtract">deleteExtract</a></li><li data-type='method'><a href="module-searchStore.html#~loadExtract">loadExtract</a></li><li data-type='method'><a href="module-searchStore.html#~resetStatus">resetStatus</a></li><li data-type='method'><a href="module-searchStore.html#~saveExtract">saveExtract</a></li><li data-type='method'><a href="module-searchStore.html#~setSearchLoading">setSearchLoading</a></li><li data-type='method'><a href="module-searchStore.html#~setStatus">setStatus</a></li><li data-type='method'><a href="module-searchStore.html#~toggleCurrentExtract">toggleCurrentExtract</a></li><li data-type='method'><a href="module-searchStore.html#~updateDisasterList">updateDisasterList</a></li></ul></li><li><a href="module-store.html">store</a></li><li><a href="module-tour.html">tour</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-tour.html#~clearTabIndex">clearTabIndex</a></li><li data-type='method'><a href="module-tour.html#~removeObserver">removeObserver</a></li><li data-type='method'><a href="module-tour.html#~restoreTabIndex">restoreTabIndex</a></li></ul></li><li><a href="module-vueMixins.html">vueMixins</a><ul class='methods'><li class='list-title'>Methods</li><li data-type='method'><a href="module-vueMixins.html#~iconName">iconName</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#update">update</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">src/components/Report.vue</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template lang="pug">
  div
    selectLocationSideBar
    div.col-xs-12.col-sm-12.col-md-8.col-lg-8.reports
      div.col-lg-12
        h1
          |Summary Report
      div.col-lg-12.report-summary
        table.usa-table-borderless
          tr
            td
              |State: {{ stateName }}
            td(id="creationDate")
              |Created on: {{ new Date() }}
          tr
            td(colspan="2")
              |Disaster(s): {{ disasters }}
          tr
            td(colspan="2")
              |Geographic Level: {{ level }}
          tr
            td(colspan="2")
              |Selected Locations: {{ locales }}
        label.sr-only(for='Export') Export report
        button.usa-button.green(type="button" name="Export" title="Export report" id="exportReportButton" @click="exportTable")
          |Export
        value-selector(:showSummarySelections="false")
        table.report-values-header
          thead
            tr
              th Type
              th Amount
        .report-loading.hidden
          icon.fa-spin(name='fa-spinner')
          span.fa-spin-text
            | Generating Report ...
          span.sr-only Loading...
        .report-values
          table
              tr(v-for='(amount, desc) in summaryRecords')
                td
                  | {{ desc }}
                td
                  | {{ Math.round(amount * 100) / 100 }}

&lt;/template>
&lt;script>
import selectLocationSideBar from './SelectLocationSideBar'
import valueSelector from './ValueSelector'
import { mapGetters } from 'vuex'
import _ from 'lodash'
/**
* Component responsible for displaying a report or reports.  This is just a stub, at this time.
* @module components/Report
*/
export default {
  name: 'report',
  components: {selectLocationSideBar, valueSelector},
  computed: {
    ...mapGetters([
      'stateFilter',
      'localeFilter',
      'disasterFilter',
      'geographicLevel'
    ]),
    stateName () {
      return _.get(this.$store.getters.stateFilter, 'name') || ''
    },
    disasters () {
      return _.map(this.$store.getters.disasterFilter, disaster => disaster.name).join(', ')
    },
    locales () {
      return _.map(this.$store.getters.localeFilter, locale => locale.name).join(', ')
    },
    level () {
      return this.$store.getters.geographicLevel.name
    },
    summaryRecords () {
      return this.$store.getters.summaryRecords
    }
  },
  methods: {
    exportTable () {
      var csv = [['title 1', 'title 2'], ['data 1.1', 'data 1.2'], ['data 2.1', 'data 2.2'], ['data 3.1', 'data 3.2']]
      var URI = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csv)
      window.open(URI, 'CSV Downloading....', 'height=200,width=300')
      // downloadWindow.document.write('&lt;h2>Close this window after downloading.&lt;/h2>')
      // downloadWindow.close()
    }
  }
}
&lt;/script>

&lt;style lang="scss">
#exportReportButton {
  margin-top:20px;
  text-align:right;
  float: right;
  margin-bottom: 20px;
  margin-right: 0;
  .hdd-icon { fill:#fff; }
  height:40px;
  margin-right:0;
}

.hidden { display:none; }
table { margin:0; }
.reports {
  padding:10px 20px;
  min-height:700px;

  div:first-child {
    padding:0;

    h1 {
      color:#fff;
      margin:0 0 20px 0;
    }
  }
  .report-summary {
    padding:0;
    table.usa-table-borderless {
      tr {
        td { min-height:24px; }
      }
    }
    table {
      color:#fff;
    //  margin-top:10px;
      text-align:left;
        tr {
          /* min-height:50px; */
          td {
            border:none;
            padding: 0;

            &amp;#creationDate { text-align:right; }
          }
      }
      .btn-group { vertical-align:inherit; }
    }
  }

  table.report-values-header {
    margin-top:10px;
    th {
      color:#000;
      padding:10px;
      border-bottom:none;

      &amp;:first-child { width:65%; }
    }
  }

  .report-loading {
    background: url('/static/img/bg_50_opacity.png');
    border:1px solid #5b616b;
    height:455px;
    padding-top:18%;
    text-align:center;

    .hdd-icon {
      fill:#fff;
      height:80px;
      margin-bottom:20px;
      width:80px;
    }

    span { color:#fff; }
  }

  .report-values {
    &amp;.hidden { display:none; }
    height:435px;
    background:#fff;
    overflow:auto;
    overflow-x:auto;
    border:1px solid #5b616b;

    table {
      color:#000;
      tr {
        td {
          &amp;:first-child { width:65%; }
          padding:5px 0 0 10px;
        }
      }
    }
  }
}
&lt;/style>
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc" target="_blank">JSDoc 3.5.3</a> on 7/4/2017 using the <a href="https://github.com/Grafluxe/boxy-jsdoc-template" target="_blank">boxy-jsdoc-template</a> theme.
</footer>

<script src="scripts/prettify/prettify.js"></script>
<script src="scripts/prettify/lang-css.js"></script>
<script src="scripts/script.js"></script>

</body>
</html>
